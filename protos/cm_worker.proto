// Starter Proto file, feel free to change name of the file
syntax = "proto3";
package main;
option go_package = "./;kvstore";

/* Define all protos related to the store. */
message KvStoreObject {
    // Required. Value for the kv store object entry.
    string value = 1;

    // Required. db_modified_ts drawn from oracle timestamp for this update.
    int64 db_modified_ts = 2;
}


/* All RPC service args and rets are supposed to be mentioned here */
/* TODO: Let value just not be string, we can have a oneof field in the proto.*/
message PutKeyInternalArg {
    // Required, request id corresponding to PutKey RPC
    string req_id = 1;
    // Required, Key value to store in kvstore
    string key = 2;
    // Required, Value to store in kvstore.
    string value = 3;
}

message PutKeyInternalRet {
    bool success = 1;
    string error_details = 2;
}

message GetKeyInternalArg {
    // Required. request id corresponding to the GetKey RPC
    string req_id = 1;
    // Required. Key to fetch the data from KvStore.
    string key = 2;
}

message GetKeyInternalRet {
    bool success = 1;
    KvStoreObject kv_object = 2;
    string error_details = 3;
}


/* All RPC services are supposed to be mentioned here */
service KvStoreService {
    rpc PutKeyInternal(PutKeyInternalArg) returns (PutKeyInternalRet) {}
    rpc GetKeyInternal(GetKeyInternalArg) returns (GetKeyInternalRet) {}
}